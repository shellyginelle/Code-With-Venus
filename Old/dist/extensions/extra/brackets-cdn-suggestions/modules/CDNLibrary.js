define(function(require,exports,module){"use strict";var CDNs=JSON.parse(require("text!modules/CDNs.json"));var TAGS={SCRIPT:'<script src="{url}"></script>',CSS:'<link rel="stylesheet" href="{url}" />'};function Library(libraryName){var id=normalizeName(libraryName),name=libraryName,tag="",libraryType="",cdns=[],versions=[];function normalizeName(libName){return libName.toLowerCase().replace(/[^a-z0-9]/g,"")}function addCDNInfo(cdnName,cdnLibrary){if(cdns.length===0){libraryType=parseLibraryType(cdnLibrary.mainfile||cdnLibrary.name);tag=libraryType==="script"?TAGS.SCRIPT:TAGS.CSS}cdns.push(new CDNInfo(cdnName,cdnLibrary.name,cdnLibrary.mainfile,cdnLibrary.versions));cdnLibrary.versions.forEach(function(version){if(versions.indexOf(version)===-1){versions.push(version)}});versions.sort(compareVersions)}function compareVersions(a,b){if(a>b){return-1}else if(a<b){return 1}else{return 0}}function matches(libraryName){return id===normalizeName(libraryName)}function getSnippet(version,https){https=https||false;var url=getURL(version),snippet=tag.replace("{url}",url);if(https){snippet=snippet.replace(/(href|src)="/,"$&https:")}return snippet}function getURL(version){for(var i=0;i<cdns.length;i++){var cdn=cdns[i];if(cdn.versions.indexOf(version)!==-1){return getCDNLink(cdn.cdnName)+cdn.name+"/"+version+"/"+cdn.mainfile}}}function getCDNLink(cdnName){for(var i=0;i<CDNs.length;i++){var cdn=CDNs[i];if(cdn.name===cdnName){return cdn.url}}return null}function parseLibraryType(fileName){if(fileName.indexOf(".css")===fileName.length-4){return"link"}else{return"script"}}function getName(){return name}function getId(){return id}function getVersions(){return versions}function getLibraryType(){return libraryType}function CDNInfo(cdnName,name,mainfile,versions){this.cdnName=cdnName;this.name=name;this.mainfile=mainfile;this.versions=versions}return{addCDNInfo:addCDNInfo,getId:getId,getName:getName,getLibraryType:getLibraryType,getSnippet:getSnippet,getVersions:getVersions,matches:matches}}Library.compareIds=function(a,b){return a.getId().localeCompare(b.getId())};exports.Library=Library});