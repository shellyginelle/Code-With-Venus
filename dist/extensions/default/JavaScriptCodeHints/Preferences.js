define(function(require,exports,module){"use strict";var StringUtils=brackets.getModule("utils/StringUtils");function settingsToRegExp(settings,baseRegExp,defaultRegExp){var regExpString="";if(settings instanceof Array&&settings.length>0){if(baseRegExp){settings.push("/"+baseRegExp.source+"/")}settings.forEach(function(value,index){if(typeof value==="string"){var isRegExp=value[0]==="/"&&value[value.length-1]==="/";if(isRegExp){value=value.substring(1,value.length-1)}else{value=StringUtils.regexEscape(value);value=value.replace("\\?",".?");value=value.replace("\\*",".*");value="^"+value+"$"}if(index>0){regExpString+="|"}regExpString=regExpString.concat(value)}})}if(!regExpString){var defaultParts=[];if(baseRegExp){defaultParts.push(baseRegExp.source)}if(defaultRegExp){defaultParts.push(defaultRegExp.source)}if(defaultParts.length>0){regExpString=defaultParts.join("|")}else{return null}}return new RegExp(regExpString)}function Preferences(prefs){var BASE_EXCLUDED_DIRECTORIES=null,DEFAULT_EXCLUDED_DIRECTORIES=/node_modules/,BASE_EXCLUDED_FILES=/^require.*\.js$|^jquery.*\.js$/,DEFAULT_MAX_FILE_COUNT=100,DEFAULT_MAX_FILE_SIZE=512*1024;if(prefs){this._excludedDirectories=settingsToRegExp(prefs["excluded-directories"],BASE_EXCLUDED_DIRECTORIES,DEFAULT_EXCLUDED_DIRECTORIES);this._excludedFiles=settingsToRegExp(prefs["excluded-files"],BASE_EXCLUDED_FILES);this._maxFileCount=prefs["max-file-count"];this._maxFileSize=prefs["max-file-size"];if(!this._maxFileCount||this._maxFileCount<0){this._maxFileCount=DEFAULT_MAX_FILE_COUNT}if(!this._maxFileSize||this._maxFileSize<0){this._maxFileSize=DEFAULT_MAX_FILE_SIZE}}else{this._excludedDirectories=DEFAULT_EXCLUDED_DIRECTORIES;this._excludedFiles=BASE_EXCLUDED_FILES;this._maxFileCount=DEFAULT_MAX_FILE_COUNT;this._maxFileSize=DEFAULT_MAX_FILE_SIZE}}Preferences.FILE_NAME=".jscodehints";Preferences.prototype.getExcludedDirectories=function(){return this._excludedDirectories};Preferences.prototype.getExcludedFiles=function(){return this._excludedFiles};Preferences.prototype.getMaxFileCount=function(){return this._maxFileCount};Preferences.prototype.getMaxFileSize=function(){return this._maxFileSize};module.exports=Preferences});