define(function(require,exports,module){"use strict";var DocumentManger=brackets.getModule("document/DocumentManager"),EditorManager=brackets.getModule("editor/EditorManager"),PreferencesManager=brackets.getModule("preferences/PreferencesManager"),prefs=PreferencesManager.getExtensionPrefs("brackets-paste-and-indent");prefs.definePreference("enabled","boolean","true");function reindentLines(codeMirror,lineFrom,lineTo){codeMirror.operation(function(){codeMirror.eachLine(lineFrom,lineTo,function(lineHandle){codeMirror.indentLine(lineHandle.lineNo(),"smart")})})}$(DocumentManger).on("currentDocumentChange",function(){var editor=EditorManager.getCurrentFullEditor();if(!editor){return}var codeMirror=editor._codeMirror;codeMirror.on("change",function(codeMirror,change){if(!prefs.get("enabled")||change.origin!=="paste"){return}var lineFrom=change.from.line,lineTo=change.from.line+change.text.length;reindentLines(codeMirror,lineFrom,lineTo)})})});